---
# Test Case TC840: Evacuate primary fabric interconnect

- method: lab.disruptors.ucsm_evacuate
  fabric: a
  action: stop
  delay: 100

- method: lab.disruptors.ucsm_evacuate
  fabric: a
  action: start
  delay: 300


- method: lab.monitors.service_endpoint
  service: neutron
  duration: 800
  period: 0.25

# Neutron-server on all control nodes
- method: lab.monitors.pgrep
  duration: 800
  period: 0.5
  node_name: control-0
  process: neutron-server
- method: lab.monitors.pgrep
  duration: 800
  period: 0.5
  node_name: control-1
  process: neutron-server
- method: lab.monitors.pgrep
  duration: 800
  period: 0.5
  node_name: control-2
  process: neutron-server

- method: lab.scenarios.tempest_test
  test: tempest.thirdparty.cisco.cvd.UCSMTest.test_create_delete_networks
  etime: 800
  git: https://github.com/cisco-openstack/tempest.git
  branch: proposed
  tempest_config_dir: /home/stack

- method: lab.scenarios.tempest_test
  test: tempest.thirdparty.cisco.cvd.UCSMTest.test_create_delete_networks
  etime: 800
  ramp_up_time: 6
  git: https://github.com/cisco-openstack/tempest.git
  branch: proposed
  tempest_config_dir: /home/stack

- method: lab.scenarios.tempest_test
  test: tempest.thirdparty.cisco.cvd.UCSMTest.test_create_delete_networks
  etime: 800
  ramp_up_time: 12
  git: https://github.com/cisco-openstack/tempest.git
  branch: proposed
  tempest_config_dir: /home/stack